<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TechHub - Your Cart</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Assume style.css contains general styles, and we add cart-specific ones inline -->
    <!-- These are incorrect links and should ideally be removed: -->
    <!-- <link rel="stylesheet" href="index.html" /> -->
    <!-- <link rel="stylesheet" href="account.html" /> -->
    <!-- <link rel="stylesheet" href="script.js" /> -->
    <link rel="stylesheet" href="style.css" />
    <!-- Cart-specific styles -->
    <style>
      /* Add some basic cart styles here for context */
      .cart-container {
        max-width: 900px;
        margin: 30px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .cart-container h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #333;
      }
      .cart-items {
        margin-bottom: 30px;
      }
      .cart-item {
        display: flex;
        gap: 20px;
        padding: 20px 0;
        border-bottom: 1px solid #eee;
      }
      .cart-item:last-child {
        border-bottom: none;
      }
      .cart-item-image img {
        width: 100px;
        height: auto;
        border-radius: 4px;
        border: 1px solid #eee;
      }
      .cart-item-details {
        flex-grow: 1;
      }
      .cart-item-title {
        font-weight: 600;
        margin-bottom: 5px;
      }
      .cart-item-specs {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 10px;
      }
      .cart-item-price {
        font-weight: bold;
        color: #e63946; /* Example color */
        margin-bottom: 10px;
        font-size: 1.1em;
      }
      .cart-item-quantity label {
        display: block;
        font-size: 0.9em;
        margin-bottom: 5px;
      }
      .quantity-controls {
        display: flex;
        align-items: center;
      }
      .quantity-btn {
        background-color: #eee;
        border: 1px solid #ccc;
        padding: 5px 10px;
        cursor: pointer;
        font-size: 1em;
        line-height: 1;
      }
      .quantity-input {
        width: 50px;
        text-align: center;
        border: 1px solid #ccc;
        border-left: none;
        border-right: none;
        padding: 5px;
        font-size: 1em;
        /* Remove spinner arrows */
        -moz-appearance: textfield;
        appearance: textfield;
      }
      .quantity-input::-webkit-outer-spin-button,
      .quantity-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      .cart-item-remove {
        background: none;
        border: none;
        color: #e63946;
        cursor: pointer;
        font-size: 1.2em;
        align-self: center; /* Vertically center the button */
        padding: 10px;
      }
      .cart-item-remove:hover {
        color: #c0392b;
      }

      .empty-cart-message {
        text-align: center;
        padding: 50px 20px;
        border: 2px dashed #eee;
        border-radius: 8px;
        color: #666;
      }
      .empty-cart-icon {
        font-size: 3em;
        margin-bottom: 20px;
        color: #ccc;
      }
      .empty-cart-message p {
        font-size: 1.2em;
        margin-bottom: 25px;
      }
      .continue-shopping {
        display: inline-block;
        padding: 12px 25px;
        background-color: #1a237e; /* Example color */
        color: white;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
      }
      .continue-shopping:hover {
        background-color: #283593; /* Example hover color */
      }

      .cart-summary {
        border-top: 2px solid #eee;
        padding-top: 20px;
        max-width: 400px;
        margin-left: auto; /* Align to the right */
      }
      .summary-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 1em;
        color: #555;
      }
      .cart-total {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        font-size: 1.3em;
        font-weight: bold;
        color: #333;
        border-top: 1px solid #ccc;
        padding-top: 15px;
      }
      .checkout-btn {
        width: 100%;
        padding: 15px;
        background-color: #27ae60; /* Example checkout color */
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-top: 15px;
      }
      .checkout-btn:hover {
        background-color: #229954;
      }
    </style>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="index.html" class="logo">Tech<span>Hub</span></a>
        <div class="mobile-toggle" id="mobile-toggle">☰</div>

        <!-- Navigation Links -->
        <ul class="nav-links" id="nav-links">
          <li><a href="index.html">Home</a></li>
          <li class="dropdown">
            <a href="computers.html">Computers ▾</a>
            <div class="dropdown-content">
              <a href="/Desktop.html">Desktop PCs</a>
              <a href="laptops.html">Laptops</a>
              <a href="gaming.html">Gaming PCs</a>
              <a href="workstations.html">Workstations</a>
              <a href="mini-pcs.html">Mini PCs</a>
            </div>
          </li>
          <li class="dropdown">
            <a href="components.html">Components ▾</a>
            <div class="dropdown-content">
              <a href="/Processors.html">Processors</a>
              <a href="motherboards.html">Motherboards</a>
              <a href="graphics-cards.html">Graphics Cards</a>
              <a href="memory.html">Memory (RAM)</a>
              <a href="storage.html">Storage</a>
              <a href="power-supplies.html">Power Supplies</a>
              <a href="cooling.html">Cooling</a>
              <a href="cases.html">Cases</a>
            </div>
          </li>
          <li class="dropdown">
            <a href="peripherals.html">Peripherals ▾</a>
            <div class="dropdown-content">
              <a href="/Monitors.html">Monitors</a>
              <a href="keyboards.html">Keyboards</a>
              <a href="mice.html">Mice</a>
              <a href="headsets.html">Headsets</a>
              <a href="speakers.html">Speakers</a>
            </div>
          </li>
          <li><a href="deals.html">Deals</a></li>
          <li><a href="support.html">Support</a></li>
        </ul>

        <!-- Icons for Search, Notifications, Account, and Cart -->
        <div class="icons">
          <div class="search-container">
            <div class="search-bar">
              <input
                type="text"
                class="search-input"
                id="search-input"
                placeholder="Search products..."
                aria-label="Search"
              />
              <button class="search-btn" id="search-btn">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  width="24"
                  height="24"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
            <div class="search-results" id="search-results"></div>
          </div>
          <div class="icon notification-icon" id="notification-icon">
            <i class="fas fa-bell"></i>
            <span class="notification-count">2</span>
          </div>
          <div class="icon" id="account-icon">
            <a href="account.html">
              <i class="fas fa-user" style="color: white"></i>
            </a>
          </div>
          <div class="icon" id="cart-icon">
            <a href="cart.html" style="color: inherit; text-decoration: none">
              <i class="fas fa-shopping-cart"></i>
              <span class="cart-count">3</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Overlay for Modal or Sidebar -->
    <div class="overlay" id="overlay"></div>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notification-panel">
      <div class="notification-header">
        <h3>Thông báo</h3>
        <button class="mark-all-read" id="mark-all-read">
          Đánh dấu tất cả đã đọc
        </button>
      </div>
      <div class="notification-list" id="notification-list">
        <div class="notification-item unread">
          <div class="notification-content">
            <h4>Khuyến mãi đặc biệt</h4>
            <p>Giảm giá 15% cho tất cả laptop trong tuần này!</p>
            <span class="notification-time">2 giờ trước</span>
          </div>
          <button class="notification-delete">×</button>
        </div>
        <div class="notification-item unread">
          <div class="notification-content">
            <h4>Sản phẩm đã về kho</h4>
            <p>RTX 4080 đã có hàng trở lại. Nhanh tay đặt ngay!</p>
            <span class="notification-time">1 ngày trước</span>
          </div>
          <button class="notification-delete">×</button>
        </div>
        <div class="notification-item">
          <div class="notification-content">
            <h4>Đơn hàng #12345 đã giao</h4>
            <p>Đơn hàng của bạn đã được giao thành công.</p>
            <span class="notification-time">3 ngày trước</span>
          </div>
          <button class="notification-delete">×</button>
        </div>
      </div>
      <div class="notification-settings">
        <a href="notification-settings.html">Cài đặt thông báo</a>
      </div>
    </div>

    <div class="cart-container">
      <h2>Your Shopping Cart</h2>

      <div class="cart-items" id="cart-items">
        <!-- Cart items will be dynamically loaded by cart.js -->
      </div>

      <!-- Empty Cart Message (Initially visible) -->
      <div class="empty-cart-message">
        <div class="empty-cart-icon"><i class="fas fa-shopping-cart"></i></div>
        <p>Your cart is currently empty.</p>
        <a href="index.html" class="continue-shopping">Continue Shopping</a>
      </div>

      <!-- Cart Summary (Initially hidden) -->
      <div class="cart-summary" style="display: none">
        <div class="summary-row cart-subtotal">
          <span>Subtotal:</span>
          <span id="subtotal">$0.00</span>
        </div>
        <div class="summary-row cart-shipping">
          <span>Shipping:</span>
          <span id="shipping">$0.00</span>
        </div>
        <div class="summary-row cart-tax">
          <span>Estimated Tax:</span>
          <span id="tax">$0.00</span>
        </div>
        <div class="cart-total">
          <span>Total:</span>
          <span id="total">$0.00</span>
        </div>

        <button class="checkout-btn" id="checkout-btn">
          <a
            href="Checkout.html"
            style="
              color: white;
              text-decoration: none;
              display: block;
              width: 100%;
              height: 100%;
            "
            >Proceed to Checkout</a
          >
        </button>
      </div>
    </div>

    <!-- Cart Functionality -->
    <script src="cart.js"></script>

    <!-- Force cart update on page load -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Cart page loaded, forcing cart update");
        // Make sure cart is loaded from localStorage
        if (typeof loadCart === "function") {
          loadCart();
        }
        // Update cart display
        if (typeof window.updateCartDisplay === "function") {
          window.updateCartDisplay();
        } else {
          console.error(
            "updateCartDisplay function not found. Make sure cart.js is loaded properly."
          );
        }
      });
    </script>

    <!-- Legacy cart script (replaced by cart.js) -->
    <script>
      /*
      // Function to update the cart summary
      function updateCartSummary() {
        let subtotal = 0;
        const cartItems = document.querySelectorAll(".cart-item");
        const cartItemsContainer = document.getElementById("cart-items"); // Get container for empty check
        const cartSummaryContainer = document.querySelector(".cart-summary"); // Get summary container

        cartItems.forEach((item) => {
          const priceElement = item.querySelector(".cart-item-price");
          const quantityElement = item.querySelector(".quantity-input");

          // Extract price and quantity, removing non-numeric characters (like $)
          const priceText = priceElement.textContent || "0";
          const price = parseFloat(priceText.replace(/[^0-9.]/g, ""));
          const quantity = parseInt(quantityElement.value, 10);

          if (!isNaN(price) && !isNaN(quantity)) {
            subtotal += price * quantity;
          }
        });

        // Basic tax and shipping calculation (replace with your actual logic)
        const shipping = 0; // Example: Free shipping
        const taxRate = 0.06; // Example: 6% tax rate
        const tax = subtotal * taxRate;
        const total = subtotal + shipping + tax;

        // Update the summary display. Use toFixed(2) to format to two decimal places
        document.getElementById("subtotal").textContent = `$${subtotal.toFixed(
          2
        )}`;
        document.getElementById("shipping").textContent =
          shipping === 0 ? "Free" : `$${shipping.toFixed(2)}`;
        document.getElementById("tax").textContent = `$${tax.toFixed(2)}`;
        document.getElementById("total").textContent = `$${total.toFixed(2)}`;

        // Check if the cart is empty and toggle visibility of summary/empty message
        toggleEmptyCartMessage();

        // Also hide/show the summary block
        if (cartItemsContainer.children.length === 0) {
          cartSummaryContainer.style.display = "none";
        } else {
          cartSummaryContainer.style.display = "block"; // Or 'flex', depending on CSS
        }
      }

      // Function to handle quantity changes
      function handleQuantityChange(event) {
        const target = event.target;
        // Find the closest quantity input within the same quantity controls block
        const input = target
          .closest(".quantity-controls")
          ?.querySelector(".quantity-input");
        if (!input) return; // Exit if input not found

        let value = parseInt(input.value, 10);
        const min = parseInt(input.min, 10) || 1;
        const max = parseInt(input.max, 10) || Infinity; // Use Infinity if max is not set

        if (target.classList.contains("increase")) {
          value++;
        } else if (target.classList.contains("decrease")) {
          value--;
        }

        // Ensure value is within min/max range
        value = Math.max(min, Math.min(max, value));

        input.value = value;
        updateCartSummary();
      }

      // Function to remove an item from the cart
      function removeItem(event) {
        // Use currentTarget if delegation is set up, or target if direct listener
        const removeButton = event.target.closest(".cart-item-remove");
        if (!removeButton) return; // Exit if the click wasn't on or inside the button

        const itemId = removeButton.dataset.itemId; // Get the item ID (optional, useful for backend)
        const cartItem = removeButton.closest(".cart-item");
        if (cartItem) {
          // Optional: Add animation before removing
          cartItem.style.transition =
            "opacity 0.3s ease-out, transform 0.3s ease-out";
          cartItem.style.opacity = "0";
          cartItem.style.transform = "translateX(-20px)";
          setTimeout(() => {
            cartItem.remove();
            updateCartSummary(); // Update summary after removing
            updateCartIconCount(); // Update cart icon after removing
          }, 300); // Match timeout to transition duration
        }
      }

      // Function to toggle the empty cart message
      function toggleEmptyCartMessage() {
        const cartItemsContainer = document.getElementById("cart-items");
        const emptyCartMessage = document.querySelector(".empty-cart-message");
        // Ensure both elements exist before proceeding
        if (!cartItemsContainer || !emptyCartMessage) return;

        if (cartItemsContainer.children.length === 0) {
          emptyCartMessage.style.display = "block"; // Show message
        } else {
          emptyCartMessage.style.display = "none"; // Hide message
        }
      }

      // Function to update cart icon count. Call this whenever the cart changes.
      function updateCartIconCount() {
        const cartCountElement = document.querySelector(".cart-count"); // Select the span
        if (cartCountElement) {
          const itemCount = document.querySelectorAll(".cart-item").length; // Count actual items in the cart page
          cartCountElement.textContent = itemCount;
          // Hide badge if count is 0
          cartCountElement.style.display = itemCount > 0 ? "flex" : "none";
        }
      }

      // --- Event Listeners ---

      // Event delegation for quantity buttons and remove buttons
      document.addEventListener("click", function (event) {
        if (event.target.classList.contains("quantity-btn")) {
          handleQuantityChange(event);
        } else if (event.target.closest(".cart-item-remove")) {
          // Handle clicks on the icon (<i>) inside the button as well
          removeItem(event);
        } else if (event.target.closest(".notification-delete")) {
          // Basic notification delete handler
          const notificationItem = event.target.closest(".notification-item");
          if (notificationItem) notificationItem.remove();
          // Update notification count if needed (implement separately)
        } else if (event.target.id === "mobile-toggle") {
          // Mobile menu toggle logic
          const navLinks = document.getElementById("nav-links");
          const overlay = document.getElementById("overlay");
          if (navLinks) navLinks.classList.toggle("active");
          if (overlay) overlay.classList.toggle("active"); // Toggle overlay with menu
        } else if (event.target.id === "notification-icon") {
          // Notification panel toggle
          const notificationPanel =
            document.getElementById("notification-panel");
          const overlay = document.getElementById("overlay");
          if (notificationPanel) notificationPanel.classList.toggle("active");
          if (overlay) overlay.classList.toggle("active");
        } else if (event.target.id === "overlay") {
          // Close mobile menu and notification panel when overlay is clicked
          const navLinks = document.getElementById("nav-links");
          const notificationPanel =
            document.getElementById("notification-panel");
          const overlay = document.getElementById("overlay");
          if (navLinks) navLinks.classList.remove("active");
          if (notificationPanel) notificationPanel.classList.remove("active");
          if (overlay) overlay.classList.remove("active");
        }
        // Add other delegated click handlers here if needed
      });

      // Event listener for direct input changes in the quantity field
      document.addEventListener("input", function (event) {
        if (event.target.classList.contains("quantity-input")) {
          let value = parseInt(event.target.value, 10);
          const min = parseInt(event.target.min, 10) || 1;
          const max = parseInt(event.target.max, 10) || Infinity;

          // Ensure value is a number and within range, or default to min
          if (isNaN(value) || value < min) {
            value = min;
          } else if (value > max) {
            value = max;
          }
          event.target.value = value; // Update the input's value if corrected
          updateCartSummary();
        }
      });

      // Initial setup when the page loads
      document.addEventListener("DOMContentLoaded", () => {
        // Initial calculation and UI updates
        updateCartSummary();
        updateCartIconCount();

        // Checkout button listener
        const checkoutButton = document.getElementById("checkout-btn");
        if (checkoutButton) {
          checkoutButton.addEventListener("click", () => {
            const totalItems = document.querySelectorAll(".cart-item").length;
            if (totalItems > 0) {
              alert(
                "Proceeding to checkout (placeholder).\nImplement your checkout process here."
              );
              // Here, you would typically redirect to a checkout page
              // window.location.href = '/checkout';
            } else {
              alert(
                "Your cart is empty. Please add items before checking out."
              );
            }
          });
        }
      });
      */
    </script>

    <!-- Footer Section -->
    <footer class="footer">
      <div class="footer-container">
        <!-- Footer Top Section with Columns -->
        <div class="footer-top">
          <!-- Company Info Column -->
          <div class="footer-column">
            <div class="footer-logo">
              <a href="index.html">Tech<span>Hub</span></a>
            </div>
            <p class="footer-description">
              Your one-stop destination for premium computer hardware,
              components, and tech accessories.
            </p>
            <div class="footer-social">
              <a href="#" class="social-icon"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
              <a href="#" class="social-icon"><i class="fab fa-discord"></i></a>
            </div>
          </div>

          <!-- Quick Links Column -->
          <div class="footer-column">
            <h3 class="footer-heading">Quick Links</h3>
            <ul class="footer-links">
              <li><a href="about.html">About Us</a></li>
              <li><a href="contact.html">Contact Us</a></li>
              <li><a href="blog.html">Blog</a></li>
              <li><a href="faq.html">FAQs</a></li>
              <li><a href="shipping.html">Shipping Info</a></li>
              <li><a href="returns.html">Returns Policy</a></li>
            </ul>
          </div>

          <!-- Products Column -->
          <div class="footer-column">
            <h3 class="footer-heading">Products</h3>
            <ul class="footer-links">
              <li><a href="computers.html">Computers</a></li>
              <li><a href="components.html">Components</a></li>
              <li><a href="peripherals.html">Peripherals</a></li>
              <li><a href="accessories.html">Accessories</a></li>
              <li><a href="deals.html">Special Deals</a></li>
              <li><a href="new-arrivals.html">New Arrivals</a></li>
            </ul>
          </div>

          <!-- My Account Column -->
          <div class="footer-column">
            <h3 class="footer-heading">My Account</h3>
            <ul class="footer-links">
              <li><a href="login.html">Login / Register</a></li>
              <li><a href="my-account.html">My Profile</a></li>
              <li><a href="orders.html">Order History</a></li>
              <li><a href="wishlist.html">Wishlist</a></li>
              <li><a href="track-order.html">Track Order</a></li>
              <li><a href="support-tickets.html">Support Tickets</a></li>
            </ul>
          </div>

          <!-- Newsletter Column -->
          <div class="footer-column">
            <h3 class="footer-heading">Newsletter</h3>
            <p class="footer-newsletter-text">
              Subscribe to receive updates, access to exclusive deals, and more.
            </p>
            <form class="footer-newsletter-form">
              <input
                type="email"
                class="newsletter-input"
                placeholder="Enter your email"
                aria-label="Email for newsletter"
              />
              <button type="submit" class="newsletter-btn">
                <i class="fas fa-paper-plane"></i>
              </button>
            </form>
            <p class="footer-newsletter-terms">
              By subscribing you agree to our
              <a href="terms.html">Terms & Conditions</a>
            </p>
          </div>
        </div>

        <!-- Footer Middle - Payment Methods -->
        <div class="footer-middle">
          <div class="payment-methods">
            <h3 class="payment-title">Payment Methods</h3>
            <div class="payment-icons">
              <i class="fab fa-cc-visa"></i>
              <i class="fab fa-cc-mastercard"></i>
              <i class="fab fa-cc-amex"></i>
              <i class="fab fa-cc-discover"></i>
              <i class="fab fa-cc-paypal"></i>
              <i class="fab fa-apple-pay"></i>
              <i class="fab fa-google-pay"></i>
            </div>
          </div>
        </div>

        <!-- Footer Bottom - Copyright -->
        <div class="footer-bottom">
          <div class="copyright">&copy; 2025 TechHub. All Rights Reserved.</div>
          <div class="footer-bottom-links">
            <a href="privacy.html">Privacy Policy</a>
            <a href="terms.html">Terms of Service</a>
            <a href="sitemap.html">Sitemap</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Back to top button -->
    <button id="back-to-top" class="back-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>
  </body>
</html>
